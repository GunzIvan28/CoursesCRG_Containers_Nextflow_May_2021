--- 
title: "Courses @ CRG: Reproducible research and data analysis with Linux containers and Nextflow pipelines"

author
  - Sarah Bonnin^[CRG, sarah.bonnin@crg.eu], Luca Cozzuto^[CRG, luca.cozzuto@crg.eu], Toni Hermoso^[CRG, toni.hermoso@crg.eu], Julia Ponomarenko^[CRG, julia.ponomarenko@crg.eu]


site: bookdown::Containers_Nextflow_course
output: bookdown::gitbook
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
---


# Welcome and about the course

This slow-paced hands-on course is designed for absolute beginners who want to start using containers and Nextflow pipelines to achieve reproducibility of data analysis. <br>
Linux containers allow the storage of code and applications in an host-independent lightweight environment. They became a fast and popular way to share and deploy applications in different environments. <br>
[Nextflow](https://www.nextflow.io) is a powerful polyglot workflow language that, coupled with [Docker](https://www.docker.com/) and [Singularity](https://sylabs.io/singularity/) containers, provides a robust, scalable and reproducible way to run computational pipelines.



## Meet the organizers and instructors

https://padlet.com/annasolea/nvp3rlxa0r37gud0

## About the course

### Outline

The 4-day Containers and Nextflow course will train participants to use and build Docker and Singularity containers and Nextflow pipelines.
It is designed to provide trainees with short and frequent hands-on sessions, while keeping theoretical sessions to a minimum.

The course will be fully virtual via the [Zoom](https://zoom.us/) platform.

Trainees will work in a dedicated [AWS environment](https://en.wikipedia.org/wiki/AWS).


### Learning objectives

About Linux containers:

- Locate and fetch Docker/Singularity images from dedicated repositories.
- Execute/Run a Docker/Singularity container from the command line.
- Build Docker container from an existing recipe.
- Design/Write a Docker recipe.
- Convert Docker to Singularity image.

About Nextflow:

- Locate and fetch Nextflow pipelines from dedicated repositories.
- Execute/Run a Nextflow pipeline.
- Describe and explain Nextflow's basic concepts.
- Test and modify a Nextflow pipeline.
- Implement short blocks of code into a Nextflow pipeline.
- Develop a Nextflow pipeline from scratch.
- Run pipeline in diverse computational environments (local, HPC, cloud )

### Prerequisites and technical requirements

#### Prerequisites

Being comfortable working with the CLI (command-line interface) in a Linux-based environment. 
Applicants are not expected to have used neither Linux containers nor Nextflow workflows before.

#### Technical requirements

You will need to connect during the course to a remote server via the "ssh" protocol: you should be familiar with it. You can learn about it [here](https://www.hostinger.com/tutorials/ssh-tutorial-how-does-ssh-work).

You should also be able to use a command-line/screen-oriented text editor (such as nano or vi/vim) or to be able to use an editor able to connect remotely like Visual studio, emacs or bbedit. If you are not sure what text editor to use, we recommend that you [learn the basics of "nano"](https://wiki.gentoo.org/wiki/Nano/Basics_Guide).

During the course, we will use the Slack platform for discussion and troubleshooting. You can either install the Slack app before the course, or you will be able to access Slack from a web browser.

We also encourage you to create a [Github account](https://github.com/join) and an associated [Docker hub account](https://hub.docker.com/signup).


### Dates, time, location

- Dates: May 2021: 
 - Containers: Monday 3rd, Tuesday 4th
 - Nextflow: Monday 10th, Tuesday 11th
- Time: 9:30-17:30:
  - Morning coffee break: 11:00-11:30am
  - Lunch break: 1pm-2pm 
  - Afternoon coffee break: 3:30-4:00pm
- Location: virtual, via Zoom.

## Program

### May 3-4: Containers

#### Day 1: Docker

- Containers: introduction and history.
- Docker hub: find existing containers.
- Fetch (and build) an image from public registries (Docker Hub, Quay.io, etc.)
 - Discovery of different relevant base images
  - Rocker, continuumio, biocontainers.pro.
- Run Docker container based on an existing image (also run it interactively).
- Build an image from an existing recipe:
  - Explain sections and keywords.
  - Build options (e.g. cache or build variables).
- Write a Docker recipe and build an image from it.
- Upload image to registries.

#### Day 2: Docker, Singularity

- Docker:
  - Working with volumes and ports
  - Sharing an image
- Singularity versus Docker.
 - Differences, pros and cons for each system. 
- Fetch (and build) Singularity images.
 - Build from existing public registries.
 - Build from local Docker instances.
- Run Singularity container (interactively).
- Understanding and working with volumes.
- Singularity build recipes.
- Advanced features: services, etc.

### May 10-11: Nextflow

#### Day 3: Understand the code, run, modify

- Introduction to Nextflow
- Scripting
- Basic concepts:
  - Channels, processes and workflows
- The work folder and its structure
- The log file
- Resuming pipelines

#### Day 4: Write and share

- Decoupling configuration and main script
- Run Nextflow with containers
- Run Nextflow in a computing cluster (e.g. HPC)
  - Definition of computing requirements and queues
  - Profiles
- Modules, subworkflows and reuse of the code
- Share Nextflow pipelines and good practices 


