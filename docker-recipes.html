<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.4 Docker recipes | Courses @ CRG: Reproducible research and data analysis with Linux containers and Nextflow pipelines</title>
  <meta name="description" content="3.4 Docker recipes | Courses @ CRG: Reproducible research and data analysis with Linux containers and Nextflow pipelines" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="3.4 Docker recipes | Courses @ CRG: Reproducible research and data analysis with Linux containers and Nextflow pipelines" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.4 Docker recipes | Courses @ CRG: Reproducible research and data analysis with Linux containers and Nextflow pipelines" />
  
  
  

<meta name="author" content="Sarah Bonnin, Luca Cozzuto, Toni Hermoso, Julia Ponomarenko" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="linux-packages.html"/>
<link rel="next" href="volumes.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Courses@CRG 2021</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome and about the course</a><ul>
<li class="chapter" data-level="1.1" data-path="meet-the-organizers-and-instructors.html"><a href="meet-the-organizers-and-instructors.html"><i class="fa fa-check"></i><b>1.1</b> Meet the organizers and instructors</a></li>
<li class="chapter" data-level="1.2" data-path="about-the-course.html"><a href="about-the-course.html"><i class="fa fa-check"></i><b>1.2</b> About the course</a><ul>
<li class="chapter" data-level="1.2.1" data-path="about-the-course.html"><a href="about-the-course.html#outline"><i class="fa fa-check"></i><b>1.2.1</b> Outline</a></li>
<li class="chapter" data-level="1.2.2" data-path="about-the-course.html"><a href="about-the-course.html#learning-objectives"><i class="fa fa-check"></i><b>1.2.2</b> Learning objectives</a></li>
<li class="chapter" data-level="1.2.3" data-path="about-the-course.html"><a href="about-the-course.html#prerequisite-dates-time-location"><i class="fa fa-check"></i><b>1.2.3</b> Prerequisite, Dates, time, location</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="program.html"><a href="program.html"><i class="fa fa-check"></i><b>1.3</b> Program</a><ul>
<li class="chapter" data-level="1.3.1" data-path="program.html"><a href="program.html#may-3-4-containers"><i class="fa fa-check"></i><b>1.3.1</b> May 3-4: Containers</a></li>
<li class="chapter" data-level="1.3.2" data-path="program.html"><a href="program.html#may-10-11-nextflow"><i class="fa fa-check"></i><b>1.3.2</b> May 10-11: Nextflow</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-containers.html"><a href="introduction-to-containers.html"><i class="fa fa-check"></i><b>2</b> Introduction to containers</a><ul>
<li class="chapter" data-level="2.1" data-path="what-are-containers.html"><a href="what-are-containers.html"><i class="fa fa-check"></i><b>2.1</b> What are containers ?</a></li>
<li class="chapter" data-level="2.2" data-path="virtual-machines-or-containers.html"><a href="virtual-machines-or-containers.html"><i class="fa fa-check"></i><b>2.2</b> Virtual machines or containers ?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="virtual-machines-or-containers.html"><a href="virtual-machines-or-containers.html#virtualisation"><i class="fa fa-check"></i><b>2.2.1</b> Virtualisation</a></li>
<li class="chapter" data-level="2.2.2" data-path="virtual-machines-or-containers.html"><a href="virtual-machines-or-containers.html#containerisation-aka-lightweight-virtualisation"><i class="fa fa-check"></i><b>2.2.2</b> Containerisation (aka lightweight virtualisation)</a></li>
<li class="chapter" data-level="2.2.3" data-path="virtual-machines-or-containers.html"><a href="virtual-machines-or-containers.html#virtual-machines-vs-containers"><i class="fa fa-check"></i><b>2.2.3</b> Virtual machines vs containers</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="history-of-containers.html"><a href="history-of-containers.html"><i class="fa fa-check"></i><b>2.3</b> History of containers</a><ul>
<li class="chapter" data-level="2.3.1" data-path="history-of-containers.html"><a href="history-of-containers.html#chroot"><i class="fa fa-check"></i><b>2.3.1</b> chroot</a></li>
<li class="chapter" data-level="2.3.2" data-path="history-of-containers.html"><a href="history-of-containers.html#additions-in-linux-kernel"><i class="fa fa-check"></i><b>2.3.2</b> Additions in Linux kernel</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="docker.html"><a href="docker.html"><i class="fa fa-check"></i><b>3</b> Docker</a><ul>
<li class="chapter" data-level="3.1" data-path="introduction-to-docker.html"><a href="introduction-to-docker.html"><i class="fa fa-check"></i><b>3.1</b> Introduction to Docker</a><ul>
<li class="chapter" data-level="3.1.1" data-path="introduction-to-docker.html"><a href="introduction-to-docker.html#what-is-docker"><i class="fa fa-check"></i><b>3.1.1</b> What is Docker?</a></li>
<li class="chapter" data-level="3.1.2" data-path="introduction-to-docker.html"><a href="introduction-to-docker.html#docker-components"><i class="fa fa-check"></i><b>3.1.2</b> Docker components</a></li>
<li class="chapter" data-level="3.1.3" data-path="introduction-to-docker.html"><a href="introduction-to-docker.html#images-versus-containers"><i class="fa fa-check"></i><b>3.1.3</b> Images versus containers</a></li>
<li class="chapter" data-level="3.1.4" data-path="introduction-to-docker.html"><a href="introduction-to-docker.html#docker-vocabulary"><i class="fa fa-check"></i><b>3.1.4</b> Docker vocabulary</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="using-existing-images.html"><a href="using-existing-images.html"><i class="fa fa-check"></i><b>3.2</b> Using existing images</a><ul>
<li class="chapter" data-level="3.2.1" data-path="using-existing-images.html"><a href="using-existing-images.html#getting-started"><i class="fa fa-check"></i><b>3.2.1</b> Getting started</a></li>
<li class="chapter" data-level="3.2.2" data-path="using-existing-images.html"><a href="using-existing-images.html#explore-docker-hub"><i class="fa fa-check"></i><b>3.2.2</b> Explore Docker hub</a></li>
<li class="chapter" data-level="3.2.3" data-path="using-existing-images.html"><a href="using-existing-images.html#docker-pull-import-an-image"><i class="fa fa-check"></i><b>3.2.3</b> docker pull: import an image</a></li>
<li class="chapter" data-level="3.2.4" data-path="using-existing-images.html"><a href="using-existing-images.html#docker-run-run-image-i.e.-start-a-container"><i class="fa fa-check"></i><b>3.2.4</b> docker run: run image, i.e. start a container</a></li>
<li class="chapter" data-level="3.2.5" data-path="using-existing-images.html"><a href="using-existing-images.html#docker-ps-check-containers-status"><i class="fa fa-check"></i><b>3.2.5</b> docker ps: check containers status</a></li>
<li class="chapter" data-level="3.2.6" data-path="using-existing-images.html"><a href="using-existing-images.html#docker-exec-execute-process-in-running-container"><i class="fa fa-check"></i><b>3.2.6</b> docker exec: execute process in running container</a></li>
<li class="chapter" data-level="3.2.7" data-path="using-existing-images.html"><a href="using-existing-images.html#docker-stop-start-restart-actions-on-container"><i class="fa fa-check"></i><b>3.2.7</b> docker stop, start, restart: actions on container</a></li>
<li class="chapter" data-level="3.2.8" data-path="using-existing-images.html"><a href="using-existing-images.html#docker-rm-docker-rmi-clean-up"><i class="fa fa-check"></i><b>3.2.8</b> docker rm, docker rmi: clean up!</a></li>
<li class="chapter" data-level="3.2.9" data-path="using-existing-images.html"><a href="using-existing-images.html#exercise"><i class="fa fa-check"></i><b>3.2.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="linux-packages.html"><a href="linux-packages.html"><i class="fa fa-check"></i><b>3.3</b> Linux packages</a><ul>
<li class="chapter" data-level="3.3.1" data-path="linux-packages.html"><a href="linux-packages.html#update-and-upgrade-packages"><i class="fa fa-check"></i><b>3.3.1</b> Update and upgrade packages</a></li>
<li class="chapter" data-level="3.3.2" data-path="linux-packages.html"><a href="linux-packages.html#search-and-install-packages"><i class="fa fa-check"></i><b>3.3.2</b> Search and install packages:</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="docker-recipes.html"><a href="docker-recipes.html"><i class="fa fa-check"></i><b>3.4</b> Docker recipes</a><ul>
<li class="chapter" data-level="3.4.1" data-path="docker-recipes.html"><a href="docker-recipes.html#building-recipes"><i class="fa fa-check"></i><b>3.4.1</b> Building recipes</a></li>
<li class="chapter" data-level="3.4.2" data-path="docker-recipes.html"><a href="docker-recipes.html#docker-build"><i class="fa fa-check"></i><b>3.4.2</b> docker build</a></li>
<li class="chapter" data-level="3.4.3" data-path="docker-recipes.html"><a href="docker-recipes.html#docker-tag"><i class="fa fa-check"></i><b>3.4.3</b> docker tag</a></li>
<li class="chapter" data-level="3.4.4" data-path="docker-recipes.html"><a href="docker-recipes.html#build-cache"><i class="fa fa-check"></i><b>3.4.4</b> Build cache</a></li>
<li class="chapter" data-level="3.4.5" data-path="docker-recipes.html"><a href="docker-recipes.html#exercise-writing-more-complex-recipes"><i class="fa fa-check"></i><b>3.4.5</b> Exercise: writing more complex recipes</a></li>
<li class="chapter" data-level="3.4.6" data-path="docker-recipes.html"><a href="docker-recipes.html#additional-commands"><i class="fa fa-check"></i><b>3.4.6</b> Additional commands</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="volumes.html"><a href="volumes.html"><i class="fa fa-check"></i><b>3.5</b> Volumes</a></li>
<li class="chapter" data-level="3.6" data-path="ports.html"><a href="ports.html"><i class="fa fa-check"></i><b>3.6</b> Ports</a></li>
<li class="chapter" data-level="3.7" data-path="integrative-example.html"><a href="integrative-example.html"><i class="fa fa-check"></i><b>3.7</b> Integrative example</a><ul>
<li class="chapter" data-level="3.7.1" data-path="integrative-example.html"><a href="integrative-example.html#fastqc-web-application"><i class="fa fa-check"></i><b>3.7.1</b> FASTQC Web Application</a></li>
<li class="chapter" data-level="3.7.2" data-path="integrative-example.html"><a href="integrative-example.html#shiny-application"><i class="fa fa-check"></i><b>3.7.2</b> Shiny Application</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="publish-images.html"><a href="publish-images.html"><i class="fa fa-check"></i><b>3.8</b> Publish images</a><ul>
<li class="chapter" data-level="3.8.1" data-path="publish-images.html"><a href="publish-images.html#push-an-image"><i class="fa fa-check"></i><b>3.8.1</b> Push an image</a></li>
<li class="chapter" data-level="3.8.2" data-path="publish-images.html"><a href="publish-images.html#automatic-builds"><i class="fa fa-check"></i><b>3.8.2</b> Automatic builds</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="breakout-exercises-with-docker-3.html"><a href="breakout-exercises-with-docker-3.html"><i class="fa fa-check"></i><b>3.9</b> Breakout exercises with Docker - 3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="singularity.html"><a href="singularity.html"><i class="fa fa-check"></i><b>4</b> Singularity</a><ul>
<li class="chapter" data-level="4.1" data-path="introduction-to-singularity.html"><a href="introduction-to-singularity.html"><i class="fa fa-check"></i><b>4.1</b> Introduction to Singularity</a><ul>
<li class="chapter" data-level="4.1.1" data-path="introduction-to-singularity.html"><a href="introduction-to-singularity.html#singularity-architecture"><i class="fa fa-check"></i><b>4.1.1</b> Singularity architecture</a></li>
<li class="chapter" data-level="4.1.2" data-path="introduction-to-singularity.html"><a href="introduction-to-singularity.html#strengths"><i class="fa fa-check"></i><b>4.1.2</b> Strengths</a></li>
<li class="chapter" data-level="4.1.3" data-path="introduction-to-singularity.html"><a href="introduction-to-singularity.html#weaknesses"><i class="fa fa-check"></i><b>4.1.3</b> Weaknesses</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="build-process.html"><a href="build-process.html"><i class="fa fa-check"></i><b>4.2</b> Build process</a><ul>
<li class="chapter" data-level="4.2.1" data-path="build-process.html"><a href="build-process.html#examples"><i class="fa fa-check"></i><b>4.2.1</b> Examples</a></li>
<li class="chapter" data-level="4.2.2" data-path="build-process.html"><a href="build-process.html#sandboxing"><i class="fa fa-check"></i><b>4.2.2</b> Sandboxing</a></li>
<li class="chapter" data-level="4.2.3" data-path="build-process.html"><a href="build-process.html#singularity-recipes"><i class="fa fa-check"></i><b>4.2.3</b> Singularity recipes</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="remote-building.html"><a href="remote-building.html"><i class="fa fa-check"></i><b>4.3</b> Remote building</a></li>
<li class="chapter" data-level="4.4" data-path="run-and-execution-process.html"><a href="run-and-execution-process.html"><i class="fa fa-check"></i><b>4.4</b> Run and execution process</a></li>
<li class="chapter" data-level="4.5" data-path="singularity-shell.html"><a href="singularity-shell.html"><i class="fa fa-check"></i><b>4.5</b> Singularity shell</a><ul>
<li class="chapter" data-level="4.5.1" data-path="singularity-shell.html"><a href="singularity-shell.html#singularity-exec"><i class="fa fa-check"></i><b>4.5.1</b> Singularity exec</a></li>
<li class="chapter" data-level="4.5.2" data-path="singularity-shell.html"><a href="singularity-shell.html#singularity-run"><i class="fa fa-check"></i><b>4.5.2</b> Singularity run</a></li>
<li class="chapter" data-level="4.5.3" data-path="singularity-shell.html"><a href="singularity-shell.html#environment-control"><i class="fa fa-check"></i><b>4.5.3</b> Environment control</a></li>
<li class="chapter" data-level="4.5.4" data-path="singularity-shell.html"><a href="singularity-shell.html#execute-from-sandboxed-images-directories"><i class="fa fa-check"></i><b>4.5.4</b> Execute from sandboxed images / directories</a></li>
<li class="chapter" data-level="4.5.5" data-path="singularity-shell.html"><a href="singularity-shell.html#execute-straight-from-a-registry"><i class="fa fa-check"></i><b>4.5.5</b> Execute straight from a registry</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="bind-paths-aka-volumes.html"><a href="bind-paths-aka-volumes.html"><i class="fa fa-check"></i><b>4.6</b> Bind paths (aka volumes)</a></li>
<li class="chapter" data-level="4.7" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>4.7</b> Exercises:</a></li>
<li class="chapter" data-level="4.8" data-path="instances.html"><a href="instances.html"><i class="fa fa-check"></i><b>4.8</b> Instances</a></li>
<li class="chapter" data-level="4.9" data-path="troubleshooting.html"><a href="troubleshooting.html"><i class="fa fa-check"></i><b>4.9</b> Troubleshooting</a><ul>
<li class="chapter" data-level="4.9.1" data-path="troubleshooting.html"><a href="troubleshooting.html#fakeroot"><i class="fa fa-check"></i><b>4.9.1</b> Fakeroot</a></li>
<li class="chapter" data-level="4.9.2" data-path="troubleshooting.html"><a href="troubleshooting.html#singularity-cache-directory"><i class="fa fa-check"></i><b>4.9.2</b> Singularity cache directory</a></li>
<li class="chapter" data-level="4.9.3" data-path="troubleshooting.html"><a href="troubleshooting.html#global-singularity-configuration"><i class="fa fa-check"></i><b>4.9.3</b> Global singularity configuration</a></li>
<li class="chapter" data-level="4.9.4" data-path="troubleshooting.html"><a href="troubleshooting.html#breakout-exercises-with-singularity"><i class="fa fa-check"></i><b>4.9.4</b> Breakout exercises with Singularity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="nextflow-day-1.html"><a href="nextflow-day-1.html"><i class="fa fa-check"></i><b>5</b> Nextflow day 1</a><ul>
<li class="chapter" data-level="5.1" data-path="what-is-nextflow.html"><a href="what-is-nextflow.html"><i class="fa fa-check"></i><b>5.1</b> What is Nextflow?</a></li>
<li class="chapter" data-level="5.2" data-path="what-is-nextflow-for.html"><a href="what-is-nextflow-for.html"><i class="fa fa-check"></i><b>5.2</b> What is Nextflow for?</a></li>
<li class="chapter" data-level="5.3" data-path="main-advantages.html"><a href="main-advantages.html"><i class="fa fa-check"></i><b>5.3</b> Main advantages</a></li>
<li class="chapter" data-level="5.4" data-path="workflow-structure.html"><a href="workflow-structure.html"><i class="fa fa-check"></i><b>5.4</b> Workflow structure</a></li>
<li class="chapter" data-level="5.5" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>5.5</b> Installation</a></li>
<li class="chapter" data-level="5.6" data-path="channels.html"><a href="channels.html"><i class="fa fa-check"></i><b>5.6</b> Channels</a></li>
<li class="chapter" data-level="5.7" data-path="exercise-1.html"><a href="exercise-1.html"><i class="fa fa-check"></i><b>5.7</b> EXERCISE 1</a></li>
<li class="chapter" data-level="5.8" data-path="processes.html"><a href="processes.html"><i class="fa fa-check"></i><b>5.8</b> Processes</a></li>
<li class="chapter" data-level="5.9" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>5.9</b> Workflow</a></li>
<li class="chapter" data-level="5.10" data-path="nextflow-log.html"><a href="nextflow-log.html"><i class="fa fa-check"></i><b>5.10</b> Nextflow log</a></li>
<li class="chapter" data-level="5.11" data-path="exercise-2.html"><a href="exercise-2.html"><i class="fa fa-check"></i><b>5.11</b> EXERCISE 2</a></li>
<li class="chapter" data-level="5.12" data-path="more-complex-scripts.html"><a href="more-complex-scripts.html"><i class="fa fa-check"></i><b>5.12</b> More complex scripts</a></li>
<li class="chapter" data-level="5.13" data-path="directives.html"><a href="directives.html"><i class="fa fa-check"></i><b>5.13</b> Directives</a></li>
<li class="chapter" data-level="5.14" data-path="resuming-your-pipeline.html"><a href="resuming-your-pipeline.html"><i class="fa fa-check"></i><b>5.14</b> Resuming your pipeline</a></li>
<li class="chapter" data-level="5.15" data-path="exercise-3.html"><a href="exercise-3.html"><i class="fa fa-check"></i><b>5.15</b> EXERCISE 3</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="nextflow-day-2.html"><a href="nextflow-day-2.html"><i class="fa fa-check"></i><b>6</b> Nextflow day 2</a><ul>
<li class="chapter" data-level="6.1" data-path="decoupling-resources-parameters-and-nextflow-script.html"><a href="decoupling-resources-parameters-and-nextflow-script.html"><i class="fa fa-check"></i><b>6.1</b> Decoupling resources, parameters and nextflow script</a><ul>
<li class="chapter" data-level="6.1.1" data-path="decoupling-resources-parameters-and-nextflow-script.html"><a href="decoupling-resources-parameters-and-nextflow-script.html#publishing-final-results"><i class="fa fa-check"></i><b>6.1.1</b> Publishing final results</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="adding-a-help-section-for-the-whole-pipeline.html"><a href="adding-a-help-section-for-the-whole-pipeline.html"><i class="fa fa-check"></i><b>6.2</b> Adding a help section for the whole pipeline</a></li>
<li class="chapter" data-level="6.3" data-path="using-singularity.html"><a href="using-singularity.html"><i class="fa fa-check"></i><b>6.3</b> Using Singularity</a></li>
<li class="chapter" data-level="6.4" data-path="adding-more-steps.html"><a href="adding-more-steps.html"><i class="fa fa-check"></i><b>6.4</b> Adding more steps</a></li>
<li class="chapter" data-level="6.5" data-path="profiles.html"><a href="profiles.html"><i class="fa fa-check"></i><b>6.5</b> Profiles</a></li>
<li class="chapter" data-level="6.6" data-path="deployment-in-the-aws-cloud.html"><a href="deployment-in-the-aws-cloud.html"><i class="fa fa-check"></i><b>6.6</b> Deployment in the AWS cloud</a></li>
<li class="chapter" data-level="6.7" data-path="modules-and-re-usage-of-the-code.html"><a href="modules-and-re-usage-of-the-code.html"><i class="fa fa-check"></i><b>6.7</b> Modules and re-usage of the code</a></li>
<li class="chapter" data-level="6.8" data-path="exercise-4.html"><a href="exercise-4.html"><i class="fa fa-check"></i><b>6.8</b> EXERCISE 4</a></li>
<li class="chapter" data-level="6.9" data-path="reporting-and-graphical-interface.html"><a href="reporting-and-graphical-interface.html"><i class="fa fa-check"></i><b>6.9</b> Reporting and graphical interface</a></li>
<li class="chapter" data-level="6.10" data-path="share-nextflow-pipelines-and-good-practices.html"><a href="share-nextflow-pipelines-and-good-practices.html"><i class="fa fa-check"></i><b>6.10</b> Share Nextflow pipelines and good practices</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://biocore.crg.eu/wiki/Main_Page" target="blank">BIOINFORMATICS CORE @ CRG</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Courses @ CRG: Reproducible research and data analysis with Linux containers and Nextflow pipelines</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="docker-recipes" class="section level2">
<h2><span class="header-section-number">3.4</span> Docker recipes</h2>
<p>A <strong>Docker recipe</strong> contains a set of instructions and commands that will be used to <strong>create/build a Docker image</strong>.</p>
<div id="building-recipes" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Building recipes</h3>
<p>All commands should be saved in a text file, named by default <strong>Dockerfile</strong>.</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Instruction</th>
<th align="center">What it does</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">FROM</td>
<td align="center">Sets the base image.</td>
</tr>
<tr class="even">
<td align="center">RUN</td>
<td align="center">Commands to run.</td>
</tr>
<tr class="odd">
<td align="center">MAINTAINER</td>
<td align="center">Docker image maintainer.</td>
</tr>
<tr class="even">
<td align="center">WORKDIR</td>
<td align="center">Sets the working directory for the container’s building instructions.</td>
</tr>
<tr class="odd">
<td align="center">SHELL</td>
<td align="center">Changes the default shell</td>
</tr>
<tr class="even">
<td align="center">ADD / COPY</td>
<td align="center">Copy files from source to destination.</td>
</tr>
<tr class="odd">
<td align="center">ARG</td>
<td align="center">Sets variables that can be used as the image is built.</td>
</tr>
<tr class="even">
<td align="center">ENV</td>
<td align="center">Sets environment variables. Persists when container is run.</td>
</tr>
<tr class="odd">
<td align="center">ENTRYPOINT</td>
<td align="center">Helps configure the container as an executable.</td>
</tr>
<tr class="even">
<td align="center">CMD</td>
<td align="center">Can provide a default executable or arguments to the ENTRYPOINT executable.</td>
</tr>
<tr class="odd">
<td align="center">VOLUME</td>
<td align="center">Creates a mount point for an external volume.</td>
</tr>
<tr class="even">
<td align="center">EXPOSE</td>
<td align="center">Exposes network ports on the container.</td>
</tr>
</tbody>
</table>
<p><a href="https://books.google.es/books?id=TshsDwAAQBAJ&amp;pg=PA96&amp;lpg=PA96&amp;dq=docker+recipe+basic+instructions&amp;source=bl&amp;ots=ZfPBPRMTG9&amp;sig=ACfU3U2ZOrPu6krVOTQ_gEBrx6TBXY1Jaw&amp;hl=en&amp;sa=X&amp;ved=2ahUKEwjl-deB1p7wAhVLXBoKHdclCuYQ6AEwEXoECAYQAw#v=onepage&amp;q=docker%20recipe%20basic%20instructions&amp;f=false">Reference</a></p>
<div id="basic-instructions" class="section level4">
<h4><span class="header-section-number">3.4.1.1</span> Basic instructions</h4>
<p>Each row in the recipe corresponds to a <strong>layer</strong> of the final image.</p>
<p><strong>FROM</strong>: parent image. Typically, an operating system. This is the <strong>base layer</strong>.</p>
<pre class="docker"><code>FROM ubuntu:18.04</code></pre>
<p><strong>RUN</strong>: the command to execute inside the image filesystem.
<br>
Think about it this way: every <strong>RUN</strong> line is essentially what you would run to install programs on a freshly installed Ubuntu OS.</p>
<pre class="docker"><code>RUN apt install wget</code></pre>
<p>A basic recipe that is taking the <strong>ubuntu:18.04</strong> image as a base layer, that updates and upgrades Linux packages, and that installs <code>wget</code>:</p>
<pre class="docker"><code>FROM ubuntu:18.04

RUN apt update &amp;&amp; apt -y upgrade
RUN apt install -y wget</code></pre>
<center>
<h4 style="background-color: #e6fadc; display: inline-block;">
<strong>HANDS-ON</strong>
</h4>
</center>
<p>Explore this <a href="https://github.com/BioContainers/containers/blob/master/blast/2.2.31/Dockerfile">Dockerfile</a>:</p>
<ul>
<li>What is the <strong>base layer</strong>?</li>
<li>What is being installed in the image? How?</li>
</ul>
<details>
<summary>
<h5 style="background-color: #e6fadc; display: inline-block;">
<em>Answer</em>
</h5>
<p></summary></p>
<p>Base layer: biocontainers/biocontainers:v1.0.0_cv4
<br>
Tool <code>blast</code> is installed using <strong>conda</strong>.</p>
</details>
</div>
<div id="more-instructions" class="section level4">
<h4><span class="header-section-number">3.4.1.2</span> More instructions</h4>
<p><strong>MAINTAINER</strong></p>
<p>Who is maintaining the container?</p>
<pre class="docker"><code>MAINTAINER Toni Hermoso Pulido &lt;toni.hermoso@crg.eu&gt;</code></pre>
<p><strong>WORKDIR</strong>: all subsequent actions will be executed in that working directory</p>
<pre class="docker"><code>WORKDIR ~</code></pre>
<p><strong>SHELL</strong>: allows the default shell used for the shell form of commands to be overridden.
<br>
Use <code>bash</code> as the default shell:</p>
<pre><code>SHELL [&quot;/bin/bash&quot;, &quot;-c&quot;]</code></pre>
<p><strong>ADD, COPY</strong>: add files to the image filesystem</p>
<p>Difference between ADD and COPY explained <a href="https://stackoverflow.com/questions/24958140/what-is-the-difference-between-the-copy-and-add-commands-in-a-dockerfile">here</a> and <a href="https://nickjanetakis.com/blog/docker-tip-2-the-difference-between-copy-and-add-in-a-dockerile">here</a></p>
<p><strong>COPY</strong>: lets you copy a local file or directory from your host (the machine from which you are building the image)</p>
<p><strong>ADD</strong>: same, but ADD works also for URLs, and for .tar archives that will be automatically extracted upon being copied.</p>
<pre class="docker"><code># COPY source destination
COPY ~/.bashrc .</code></pre>
<p><strong>ENV, ARG</strong>: run and build environment variables</p>
<p>Difference between ARG and ENV explained <a href="https://vsupalov.com/docker-arg-vs-env/">here</a>.</p>
<p><a href="https://d33wubrfki0l68.cloudfront.net/ed9cab66953fd3a80af63675cf3fefade4572c01/00a3b/images/docker-env-vars/docker_environment_build_args_overview.png"><img src="https://d33wubrfki0l68.cloudfront.net/ed9cab66953fd3a80af63675cf3fefade4572c01/00a3b/images/docker-env-vars/docker_environment_build_args_overview.png" width="800/"></a></p>
<ul>
<li><strong>ARG</strong> values: available only <em>while the image is built.</em></li>
<li><strong>ENV</strong> values: available <em>for the future running containers.</em></li>
</ul>
<p>You can use <strong>ARG</strong>, for example, to specify the version of the base layer:</p>
<pre><code>ARG UbuntuVersion=18.04

FROM ubuntu:${UbuntuVersion}</code></pre>
<p>or to build a specific software version in the image:</p>
<pre><code>FROM ubuntu:18.04

ARG PyVersion=2.7

RUN apt update &amp;&amp; apt upgrade -y
RUN apt install python${PyVersion}</code></pre>
<p>We will see in the next topic how to change the arguments in <strong>ARG</strong> in the command-line as we create/<strong>build</strong> the image.</p>
<p><em>SHOULD WE PUT MORE ABOUT sENV TOO??</em></p>
<p><br></p>
<p><strong>CMD, ENTRYPOINT</strong>: command to execute when generated container starts</p>
<p>The ENTRYPOINT specifies a command that will always be executed when the container starts.
<br>
The CMD specifies arguments that will be fed to the ENTRYPOINT.</p>
<p><br></p>
<p>In the example below, when the container is run without an argument, it will execute <code>echo "hello world"</code> (default).<br>
If it is run with the argument <strong>nice</strong> it will execute <code>echo "nice"</code>.</p>
<pre class="docker"><code>FROM ubuntu:18.04

ENTRYPOINT [&quot;/bin/echo&quot;]
CMD [&quot;hello world&quot;]</code></pre>
<p>A more complex recipe (save it in a text file named <strong>Dockerfile</strong>!):</p>
<pre class="docker"><code>FROM ubuntu:18.04

MAINTAINER Toni Hermoso Pulido &lt;toni.hermoso@crg.eu&gt;

SHELL [&quot;/bin/bash&quot;, &quot;-c&quot;]

WORKDIR ~

RUN apt-get update &amp;&amp; apt-get -y upgrade
RUN apt-get install -y wget

ENTRYPOINT [&quot;/usr/bin/wget&quot;]
CMD [&quot;https://cdn.wp.nginx.com/wp-content/uploads/2016/07/docker-swarm-hero2.png&quot;]</code></pre>
</div>
</div>
<div id="docker-build" class="section level3">
<h3><span class="header-section-number">3.4.2</span> docker build</h3>
<p><code>docker build</code> will create/build a Docker image from a Docker recipe.
<br></p>
<p>It implicitely looks for a <strong>Dockerfile</strong> file in the current directory:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="docker-recipes.html#cb49-1"></a><span class="ex">docker</span> build .</span></code></pre></div>
<p>Same as:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="docker-recipes.html#cb50-1"></a><span class="ex">docker</span> build --file Dockerfile .</span></code></pre></div>
<p>Syntax: <strong>–file / -f</strong></p>
<p><strong>.</strong> stands for the context (in this case, current directory) of the build process. This makes sense if copying files from filesystem, for instance.
<br>
<strong>IMPORTANT</strong>: Avoid contexts (directories) overpopulated with files (even if not actually used in the recipe).</p>
<p>You can define a specific name for the image during the build process.</p>
<p>Syntax: <strong>-t</strong> <em>imagename:tag</em>. If not defined <code>:tag</code> default is latest.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="docker-recipes.html#cb51-1"></a><span class="ex">docker</span> build -t mytestimage .</span></code></pre></div>
<p>The last line of installation should be <strong>Successfully built …</strong>: then you are good to go.
<br>
Check with <code>docker images</code> that you see the newly built image in the list…</p>
<p>Then let’s check the ID of the image and run it!</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb52-1"><a href="docker-recipes.html#cb52-1"></a><span class="ex">docker</span> images</span>
<span id="cb52-2"><a href="docker-recipes.html#cb52-2"></a></span>
<span id="cb52-3"><a href="docker-recipes.html#cb52-3"></a><span class="ex">docker</span> run f9f41698e2f8</span>
<span id="cb52-4"><a href="docker-recipes.html#cb52-4"></a><span class="ex">docker</span> run mytestimage</span></code></pre></div>
<p>Try to run it with an argument:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb53-1"><a href="docker-recipes.html#cb53-1"></a><span class="ex">docker</span> run f9f41698e2f8 https://cdn-images-1.medium.com/max/1600/1*_NQN6_YnxS29m8vFzWYlEg.png</span></code></pre></div>
<center>
<h4 style="background-color: #e6fadc; display: inline-block;">
<strong>HANDS-ON</strong>
</h4>
</center>
<ol style="list-style-type: decimal">
<li>Write a docker recipe in a file <strong>Dockerfile_test</strong> that:</li>
</ol>
<ul>
<li>is based on <strong>ubuntu:18.04</strong></li>
<li><strong>echoes “I love containers”</strong> by default or any other word/sentence, if given as the argument.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Build the image (give the image the name of your choice)</li>
<li>Run the image:</li>
</ol>
<ul>
<li>with no argument.</li>
<li>with <strong>“Docker course”</strong> as an argument.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Modify the <strong>Dockerfile_test</strong>:</li>
</ol>
<ul>
<li>add the MAINTAINER field</li>
<li>update and upgrade Ubuntu packages.</li>
<li>install <a href="https://zoomadmin.com/HowToInstall/UbuntuPackage/figlet"><strong>figlet</strong></a></li>
<li>change “echo” to “figlet” in the <strong>ENTRYPOINT</strong></li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>Build the image.</li>
<li>Run the new image, with the default parameters, then with <strong>“Docker course”</strong> as an argument.</li>
</ol>
<details>
<summary>
<h5 style="background-color: #e6fadc; display: inline-block;">
<em>Answer</em>
</h5>
<p></summary></p>
<ol style="list-style-type: decimal">
<li>Recipe saved in <strong>Dockerfile_test</strong>:</li>
</ol>
<pre><code>FROM ubuntu:18.04

ENTRYPOINT [&quot;echo&quot;]
CMD [&quot;I love containers&quot;]</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Build:</li>
</ol>
<pre><code>docker build --file Dockerfile_test -t mytest .</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Run the image:</li>
</ol>
<pre><code># with no argument
docker run mytest

# with argument &quot;Docker course&quot;
docker run mytest &quot;Docker course&quot;</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Recipe:</li>
</ol>
<pre><code>FROM ubuntu:18.04

MAINTAINER Name Surname &lt;name.surname@mail.com&gt;

RUN apt-get update &amp;&amp; apt-get upgrade -y
RUN apt-get install -y figlet

ENTRYPOINT [&quot;figlet&quot;]
CMD [&quot;I love containers&quot;]</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Build the image.</li>
</ol>
<pre><code>docker build --file Dockerfile_test -t mytest .</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Run the new image, with the default parameter, then with <strong>“Docker course”</strong> as an argument.</li>
</ol>
<pre><code># run with no argument
docker run mytest

# run with argument &quot;Docker course&quot;
docker run mytest &quot;Docker course&quot;</code></pre>
</details>
<p>Building with a specific <strong>ARG</strong>: let’s take the example we had when we introduced the <strong>ARG</strong> command:</p>
<pre><code>FROM ubuntu:18.04

ARG PyVersion=2.7

RUN apt update &amp;&amp; apt upgrade -y
RUN apt install python${PyVersion}
</code></pre>
<p>We can save the recipe in a file called <strong>Dockerfile_ARG</strong>.
<br></p>
<p>Build the image to get the default version of Python (version 2.7, as given by ARG):</p>
<pre><code>docker build -t Py2.7 -f Dockerfile_ARG .</code></pre>
<p>Install version 3.8 of Python (give the argument via the <code>--build-arg</code> option):</p>
<pre><code>docker build --build-arg PyVersion=3.8 -t Py3.8 -f Dockerfile_ARG .</code></pre>
<p>Now check the python version in each image:</p>
<pre><code>docker run Py2.7 which python2.7
docker run Py3.8 which python3.8</code></pre>
</div>
<div id="docker-tag" class="section level3">
<h3><span class="header-section-number">3.4.3</span> docker tag</h3>
<p>Use <code>docker tag</code> in order to <strong>tag a local image</strong> that has - for example - ID “e23aaea5dff1” into the “ubuntu_wget” image name repository with version/tag “1.0”:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb64-1"><a href="docker-recipes.html#cb64-1"></a><span class="ex">docker</span> tag e23aaea5dff1 --tag ubuntu_wget:1.0</span></code></pre></div>
</div>
<div id="build-cache" class="section level3">
<h3><span class="header-section-number">3.4.4</span> Build cache</h3>
<p>Every line of a Dockerfile is actually an image/layer by itself.</p>
<p>Modify for instance the last bit of the previous image (let’s change the image URL) and rebuild it (even with a different name/tag):</p>
<pre class="docker"><code>FROM ubuntu:18.04

MAINTAINER Toni Hermoso Pulido &lt;toni.hermoso@crg.eu&gt;

WORKDIR ~

RUN apt-get update &amp;&amp; apt-get -y upgrade
RUN apt-get install -y wget

ENTRYPOINT [&quot;/usr/bin/wget&quot;]
CMD [&quot;https://cdn-images-1.medium.com/max/1600/1*_NQN6_YnxS29m8vFzWYlEg.png&quot;]</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb66-1"><a href="docker-recipes.html#cb66-1"></a><span class="ex">docker</span> build -t mytestimage2 .</span></code></pre></div>
<p>It will start from the last line, and not re-run commands before the modification that were successfully built.
<br>
This is OK most of the times and very convenient for testing and trying new steps, but it may lead to errors when versions are updated (either FROM image or included packages).
<br>
It is beneficial to start from scratch with <code>--no-cache</code> option when building the image.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb67-1"><a href="docker-recipes.html#cb67-1"></a><span class="ex">docker</span> build --no-cache -t mytestimage2 .</span></code></pre></div>
</div>
<div id="exercise-writing-more-complex-recipes" class="section level3">
<h3><span class="header-section-number">3.4.5</span> Exercise: writing more complex recipes</h3>
<p><em>Breakout rooms afternoon day 1?</em></p>
<p><em>NOT FINISHED, NOT EASILY WORKING; NEED TO CHANGE IT!!</em></p>
<p>Build an image based on <strong>CentOS</strong> (use base layer <a href="https://hub.docker.com/_/centos?tab=tags&amp;page=1&amp;ordering=last_updated">centos:7</a>):</p>
<ul>
<li>Install <a href="https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.4.2/bowtie2-2.4.2-source.zip"><strong>bowtie2</strong></a>. Follow the next steps:
<ul>
<li>Install <code>wget</code>, <code>unzip</code>, <code>make</code>, <code>perl</code>, <code>which</code>, <code>gcc</code> (Linux packages)</li>
<li>Download and unzip the <a href="https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.4.2/bowtie2-2.4.2-source.zip"><strong>bowtie2 “.zip” file</strong></a></li>
<li>Add location of the bowtie2 folder to <a href="http://bowtie-bio.sourceforge.net/bowtie2/manual.shtml#adding-to-path">system <em>PATH</em></a></li>
<li>When you start a container from this image, it should <strong>show the help page by default</strong>.</li>
</ul></li>
<li>Tag the successfully built image as <strong>bowtie2_2.4.2:1.0</strong></li>
</ul>
<p>Create a new recipe based on the previous one, that allows one to <strong>choose the version of bowtie2 upon building the image</strong>.
* We were working with version 2.4.2 of bowtie2, you can now try and play with installing versions <a href="https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.4.1/bowtie2-2.4.1-source.zip">2.4.1</a> or <a href="https://sourceforge.net/projects/bowtie-bio/files/bowtie2/2.4.1/bowtie2-2.4.1-source.zip">2.3.4</a>.</p>
<details>
<summary>
<h5 style="background-color: #e6fadc; display: inline-block;">
<em>Answer</em>
</h5>
<p></summary></p>
<p>File <strong>Dockerfile_bowtie2</strong>:</p>
<pre><code>FROM centos:7

RUN yum update -y
RUN curl https://download-ib01.fedoraproject.org/pub/epel/7/x86_64/Packages/b/bowtie2-2.4.1-1.el7.x86_64.rpm &gt; bowtie2-2.4.1-1.el7.x86_64.rpm
RUN yum install -y bowtie2-2.4.1-1.el7.x86_64.rpm

ENTRYPOINT [&quot;bowtie2&quot;]
CMD [&quot;--help&quot;]</code></pre>
<p>Build:</p>
<pre><code>docker build -t imagebowtie2 -f Dockerfile_bowtie2 .</code></pre>
<p>Change name / tag:</p>
<pre><code>docker tag imagebowtie2 bowtie2_2.4.2:1.0</code></pre>
</details>
</div>
<div id="additional-commands" class="section level3">
<h3><span class="header-section-number">3.4.6</span> Additional commands</h3>
<ul>
<li><p><strong>docker inspect</strong>: Get details from containers (both running and stopped). Things such as IPs, volumes, etc.</p></li>
<li><p><strong>docker logs</strong>: Get <em>console</em> messages from running containers. Useful when using with web services.</p></li>
<li><p><strong>docker commit</strong>: Turn a container into an image. It make senses to use when modifying container interactively. However this is bad for reproducibility if no steps are saved.</p></li>
</ul>
<p>Good for long-term reproducibility and for critical production environments:</p>
<ul>
<li><p><strong>docker save</strong>: Save an image into a tar archive.</p></li>
<li><p><strong>docker export</strong>: Save a container into a tar archive.</p></li>
<li><p><strong>docker import</strong>: Import a tar archive into an image.</p></li>
</ul>
<center>
<h4 style="background-color: #e6fadc; display: inline-block;">
<strong>HANDS-ON</strong>
</h4>
</center>
<ul>
<li>Save a previously created image into a <strong>tar archive</strong> (Look at the command’s options for help)</li>
</ul>
<details>
<summary>
<h5 style="background-color: #e6fadc; display: inline-block;">
<em>Answer</em>
</h5>
<p></summary></p>
<pre><code>docker save -o bowtie2image1.0.tar bowtie2image:1.0</code></pre>
</details>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="linux-packages.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="volumes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["courses_at_crg_2021.pdf", "courses_at_crg_2021.epub"],
"toc": {
"collapse": "section"
},
"search": true
});
});
</script>

</body>

</html>
